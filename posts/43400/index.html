<!DOCTYPE html>
<html>
    <head><!-- hexo injector head_begin start --><script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script><!-- hexo injector head_begin end -->
        <!-- 元数据 -->
        <meta charset="utf-8">
        <meta name="author" content="GoDm@">
        <meta name="Description" content="GoDm@'s blog">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.0,user-scalable=no">
        <title>GoDm@'s blog</title>

        <link rel="stylesheet" href="/css/layout.css">

        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/obsidian.css">
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>
        <script> hljs.highlightAll();</script> -->

        <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <!-- hexo injector head_end start --><style>/* 布局样式 */
.hexo-tips-layout {
    margin: 1.5rem 0;
    padding: 1.2rem 1.5rem;
    border-radius: 8px;
    border: 1px solid;
    border-left-width: 6px;
    display: flex;
    align-items: center;
    transition: transform 0.3s ease;
}

.hexo-tips-layout:hover {
    transform: translateX(5px);
}

.hexo-tips-layout .icon {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    font-size: clamp(2em, 2vw, 3em);
    min-width: 2rem;
    transition: transform 0.3s ease;
}

.hexo-tips-layout:hover .icon {
    transform: scale(1.1);
}

.hexo-tips-layout .content {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    transition: transform 0.3s ease;
}

.hexo-tips-layout:hover .content {
    transform: translateX(3px);
}

/* 响应式调整 */
@media screen and (max-width: 768px) {
    .hexo-tips-layout {
        padding: 1rem;
    }
}

/* 为每种类型的提示框添加主题样式 */
[class^="tips-style-"] {
    --tips-light-bg: #fff; /* 默认值 */
    --tips-dark-bg: #333;  /* 默认值 */
    --tips-border: #000;   /* 默认值 */
}

/* 主题样式规则 */
[class^="hexo-tips-"] {
    border-color: var(--tips-border);
}

[class^="hexo-tips-"] .icon {
    color: var(--tips-border);
}

</style><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="GoDm@'s Blog" type="application/atom+xml">
</head>

    <body>
        <h1 id="WebTitle" style="text-align: center;">GoDm@'s Blog</h1>
        <!--文章详情页-->
<div class="meta" style="margin: auto;">
    <h1 style="text-align: center;">【点灯大师】点亮I.MX6ULL开发板的LED灯</h1>
</div>

<div class="a_container">
    <div id="article">
        <details>
<summary>版权信息</summary>
<p>:::warning</p>
<p>本文章为博主原创文章。遵循 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh-hans">CC 4.0 BY-SA</a> 版权协议，转载请附上原文出处链接和本声明。</p>
<p>:::</p>
</details>
<hr />
<p>:::info<br />
学习笔记记录，非教程。<br />
:::</p>
<ul>
<li><a href="#1-%E6%B1%87%E7%BC%96led%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90">1. 汇编LED原理分析</a></li>
<li><a href="#2-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B">2. 初始化流程</a>
<ul>
<li><a href="#21-stm32%E7%9A%84%E5%A4%A7%E8%87%B4io%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B">2.1. STM32的大致IO初始化流程</a></li>
<li><a href="#22-imx6ull-io%E5%88%9D%E5%A7%8B%E5%8C%96">2.2. I.MX6ULL IO初始化</a></li>
</ul>
</li>
<li><a href="#3-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0">3. 汇编语言实现</a></li>
<li><a href="#4-%E9%93%BE%E6%8E%A5%E4%B8%8E%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2">4. 链接与格式转换</a>
<ul>
<li><a href="#41-%E9%93%BE%E6%8E%A5">4.1. 链接</a></li>
<li><a href="#42-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2">4.2. 格式转换</a></li>
</ul>
</li>
<li><a href="#5-%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9sdk%E5%8C%85%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6">5. 使用官方SDK包生成镜像文件</a></li>
<li><a href="#6-%E5%AE%89%E8%A3%85sdk%E5%8C%85">6. 安装SDK包</a>
<ul>
<li><a href="#61-%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E6%A3%80%E6%9F%A5%E5%8F%AF%E7%94%A8%E6%80%A7">6.1. （可选）检查可用性</a></li>
<li><a href="#62-%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6">6.2. 生成镜像文件</a></li>
</ul>
</li>
<li><a href="#7-%E7%83%A7%E5%BD%95%E5%88%B0sd%E5%8D%A1">7. 烧录到SD卡</a></li>
<li><a href="#8-%E8%BE%BE%E6%88%90%E6%88%90%E5%B0%B1%E7%82%B9%E7%81%AF%E5%A4%A7%E5%B8%88">8. 达成成就【点灯大师】</a></li>
<li><a href="#9-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">9. 参考资料</a></li>
</ul>
<h2 id="1-汇编led原理分析"><a class="markdownIt-Anchor" href="#1-汇编led原理分析"></a> 1. 汇编LED原理分析</h2>
<p>为什么不像STM32那样直接使用c语言？</p>
<p>答：因为ST已经为你用汇编写好了初始化过程，比如初始化时钟等等外设，初始化Ram，设置sp指针，配置好c语言运行环境等等。而一般这些一块CortexA架构的板子是不提供的。</p>
<p>所以我们要使用汇编：</p>
<ol>
<li>初始化一些SOC外设。</li>
<li>初始化DDR<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>。</li>
</ol>
<blockquote>
<p>这个I.MX6U倒是不需要。I.MX内部的ROM存放了自己编写的启动代码，这些启动代码可以读取DDR配置信息，并完成其的初始化。</p>
</blockquote>
<ol start="3">
<li>设置sp指针，一般指向DDR，设置好C语言运行环境。</li>
</ol>
<h2 id="2-初始化流程"><a class="markdownIt-Anchor" href="#2-初始化流程"></a> 2. 初始化流程</h2>
<blockquote>
<p>具体原理、寄存器详细位讲解可以看正点原子的Linux驱动开发指南。</p>
</blockquote>
<p>这里我们对比STM32的IO初始化流程来学习I.MX的初始化流程</p>
<h3 id="21-stm32的大致io初始化流程"><a class="markdownIt-Anchor" href="#21-stm32的大致io初始化流程"></a> 2.1. STM32的大致IO初始化流程</h3>
<ol>
<li>使能时钟</li>
<li>设置IO复用，复用为GPIO</li>
<li>配置GPIO的电气属性</li>
<li>使用GPIO——利用控制寄存器设置GPIO的输入输出功能</li>
</ol>
<h3 id="22-imx6ull-io初始化"><a class="markdownIt-Anchor" href="#22-imx6ull-io初始化"></a> 2.2. I.MX6ULL IO初始化</h3>
<p>同样的，IO的使用分为两个部分，CONFIG和CONTROL</p>
<p>CONFIG部分，I.MX的每个IO都有两个寄存器来配置，分别是多路复用寄存器（IOMUXC_SW_MUX_CTL_PAD_XX_XX）和配置电气特性的寄存器（IOMUXC_SW_PAD_CTL_PAD_XX_XX）它们在命名的第三个字段加以区分。我们可以查阅正点原子的Linux驱动开发指南以及官方的参考手册查看每一位的意义。</p>
<p>CONTROL部分，也有各种寄存器，来控制IO的各个功能，比如<em>GPIOx_DR</em>寄存器就是控制输入输出的高低电平，共有32位，每一位控制第x组IO各个引脚的高低电平。</p>
<p>使能时钟，CCGR0~CCGR6这7个寄存器控制着6ULL所有外设时钟的使能。（参考《I.MX6UL 参考手册》的第 18 章“Chapter 18: ClockController Module(CCM)”）</p>
<p>总结一下，I.MX6ULL的初始化一个IO流程如下：</p>
<ol>
<li>使能时钟，CCGR0<sub>CCGR6这7个寄存器控制着6ULL所有外设时钟的使能。为了简单，设置CCGR0</sub>CCGR6这7个寄存器全部为0XFFFFFFFF，相当于使能所有外设时钟。</li>
<li>IO复用，将寄存器IOMUXC_SW_MUX_CTL_PAD_GPIO1_IO03的bit3~0设置为0101=5，这样GPIO1_IO03就复用为GPIO。</li>
<li>寄存器IOMUXC_SW_PAD_CTL_PAD_GPIO1_IO03是设置GPIO1_IO03的电气属性。包括压摆率、速度、驱动能力、开漏、上下拉等。</li>
<li>配置GPIO功能，设置输入输出。设置GPIO1_GDIR寄存器bit3为1，也就是设置为输出模式。设置GPIO1_DR寄存器的bit3，为1表示输出高电平，为0表示输出低电平。</li>
</ol>
<h2 id="3-汇编语言实现"><a class="markdownIt-Anchor" href="#3-汇编语言实现"></a> 3. 汇编语言实现</h2>
<p>在了解上述内容后我们可以正式开始写代码了，在Linux环境下新建<code>led.s</code>汇编文件。<br />
内容可以参考如下</p>
<pre class="line-numbers language-asm" data-language="asm"><code class="language-asm">&#x2F;* 点亮led汇编代码 *&#x2F;

.global _start @全局标号

_start:

@1.使能时钟
    @查找原理图和参考手册可知，LED1连接GPIO1-io4，GPIO1的时钟属于CCM_CCGR1 CG13（26-27位）

ldr r0, &#x3D;0x020c406c @将寄存器地址加载到r0
ldr r1, &#x3D;0xFFFFFFF  @为了方便打开全部时钟，相应的功耗也有所增加
str r1, [r0] @将r1中的值存入以r0中的值为地址的寄存器中
  
2.设置io引脚复用为gpio
  
ldr r0, &#x3D;0x020e006c @将寄存器地址加载到r0
mov r1, #5 @将寄存器要设置的值加载到r1
str r1, [r0]


@3.设置io电气属性

    &#x2F;*

     * bit0     SRE压摆率       0       disable

     * bit5:3   DSE io驱动能力  110     R0&#x2F;6

     * bit7:6   speed          10      100MHz

     * bit11    ODE 开路输出     0      disable

     * bit12    PKE 使能pull&#x2F;keeper 1   enable

     * bit13    PUE pull or keeper 0   keeper

     * bit15:14 上下拉电阻       00      100K下拉

     * bit16    HYS             0       disable

     *&#x2F;

ldr r0, &#x3D;0x020e02f8
ldr r1, &#x3D;0x10b0 @将寄存器要设置的值加载到r1
str r1, [r0]
 
@4.设置GPIO功能
    @设置为输出 GDIR寄存器

ldr r0, &#x3D;0x0209c004
mov r1, #16
str r1, [r0] @将GPIO1组的第4个io口设置为输出模式

    @设置为输出低电平 DR寄存器

ldr r0, &#x3D;0x0209c000
mov r1, #0
str r1, [r0] @将GPIO1组的第4个io口设置为输出低电平  

@5.防止CPU进入未知状态

    @写入死循环
loop:
    b loop
    
&#x2F;* Finally! END! *&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="4-链接与格式转换"><a class="markdownIt-Anchor" href="#4-链接与格式转换"></a> 4. 链接与格式转换</h2>
<blockquote>
<p>默认已安装了<code>arm-linux-gnueabihf</code>编译套件</p>
</blockquote>
<h3 id="41-链接"><a class="markdownIt-Anchor" href="#41-链接"></a> 4.1. 链接</h3>
<p>使用命令</p>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">arm-linux-gnueabihf-ld -Ttext 0X80000000 led.o -o led.elf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>上述命令中-Ttext 就是指定链接起始地址，“-o”，我理解为output，指定链接生成的 elf 文件名，这里我们命名为 led.elf。上述命令执行完以后就会在工程目录下多一个 led.elf 文件。<br />
这个elf相当于win中的exe，是一个可执行文件。</p>
<h3 id="42-格式转换"><a class="markdownIt-Anchor" href="#42-格式转换"></a> 4.2. 格式转换</h3>
<p>使用命令</p>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">arm-linux-gnueabihf-objcopy -O binary -S -g led.elf led.bin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>上述命令中，“-O”选项指定以什么格式输出，后面的“binary”表示以二进制格式输出，<br />
选项“-S”表示不要复制源文件中的重定位信息和符号信息，“-g”表示不复制源文件中的调试<br />
信息。<br />
至此我们终于等到了想要的东西—led.bin 文件。<br />
但是 I.MX6U 不能直接烧写编译生成的.bin 文件，我们需要在.bin 文件前面添加一些头信息构成满足 I.MX6U 需求的最终可烧写文件，I.MX6U 的最终可烧写文件组成如下：</p>
<ol>
<li>Image vector table，简称 IVT，IVT 里面包含了一系列的地址信息，这些地址信息在<br />
ROM 中按照固定的地址存放着。</li>
<li>Boot data，启动数据，包含了镜像要拷贝到哪个地址，拷贝的大小是多少等等。</li>
<li>Device configuration data，简称 DCD，设备配置信息，重点是 DDR3 的初始化配置。</li>
<li>用户代码可执行文件，比如 led.bin。</li>
</ol>
<h2 id="5-使用官方sdk包生成镜像文件"><a class="markdownIt-Anchor" href="#5-使用官方sdk包生成镜像文件"></a> 5. 使用官方SDK包生成镜像文件</h2>
<p><span class="spoiler">你不会以为我要用正点原子或者野火提供的镜像制作软件吧孩子</span></p>
<p>此步所需软件：<br />
:::success</p>
<ul>
<li>NXP SDK_2.2_MCIM6ULL<br />
:::</li>
</ul>
<p>第二个可从NXP官网获取。</p>
<h2 id="6-安装sdk包"><a class="markdownIt-Anchor" href="#6-安装sdk包"></a> 6. 安装SDK包</h2>
<p>使用共享文件夹将“SDK_2.2_MCIM6ULL_RFP_Linux.run” 拷贝到Linux下，存放位置自定。用chmod添加权限。然后运行.run文件生成SDK，linux下的源文件命令如下：</p>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">.&#x2F;SDK_2.2_MCIM6ULL_RFP_Linux.run<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="61-可选检查可用性"><a class="markdownIt-Anchor" href="#61-可选检查可用性"></a> 6.1. （可选）检查可用性</h3>
<p>此步所需软件：<br />
:::success</p>
<ul>
<li>gcc-arm-none-eabi交叉编译套件</li>
<li>cmake<br />
:::</li>
</ul>
<p>在Linux环境下，<br />
添加临时环境变量，执行以下命令：</p>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">export ARMGCC_DIR&#x3D;&#x2F;usr<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>进入工程文件<strong>SDK_2.2_MCIM6ULL/boards/evkmcimx6ull/demo_apps/hello_world/armgcc</strong> ，这是官方的demo，运行build_ddr_release.sh脚本</p>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">.&#x2F;build_ddr_release.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>进入同文件夹的 <code>ddr_release</code> 文件夹，会发现里面有一个sdk20-app.img，这实际上是添加了头文件的可用img文件。</p>
<p>跳转到第7节烧录到sd卡并启动。连接到串口后会板子会发送&quot;hello world&quot;。</p>
<h4 id="2025-10-26补充"><a class="markdownIt-Anchor" href="#2025-10-26补充"></a> 2025-10-26补充</h4>
<blockquote>
<p>首先感谢我当时写了这篇文章，，，，，查阅起来真是太方便了<br />
当我指定编译器并运行脚本时提示缺少newlib库，这里推荐使用ARM官方的编译工具链，以避免缺少库的问题。<br />
附链接：<a target="_blank" rel="noopener" href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">Arm GNU Toolchain Downloads – Arm Developer</a></p>
</blockquote>
<h3 id="62-生成镜像文件"><a class="markdownIt-Anchor" href="#62-生成镜像文件"></a> 6.2. 生成镜像文件</h3>
<p>进入工程文件<strong>SDK_2.2_MCIM6ULL/tools/imgutil/evkmcimx6ull</strong><br />
查看readme.txt 查看使用教程<br />
readme.txt内容如下：</p>
<pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">IMGUTIL User Guide
  
======================================

1. Build SDK2.0 application
2. Copy built binary (.bin file) to imgutil/&lt;board> folder and rename to sdk20-app.bin
3. In imgutil/&lt;board> folder, run mkimage.sh in mingw32 shell to get bootable image file sdk20-app.img
    a. If the image is built with ram link file, use "mkimage.sh ram" to make the bootable image.
    b. If the image is built with flash link file, use "mkimage.sh flash" to make the bootable XIP image.
    c. If the image is built with ram link file and want to boot from MicroSD card, use "mkimage.sh sd" to make the bootable image.

======================================<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>大致意思：</p>
<ol>
<li>build SDK（前面已经做了）</li>
<li>复制你要制作为镜像的bin文件到对应的设备文件夹并将复制的bin文件改名为<code>sdk20-app.bin</code></li>
</ol>
<blockquote>
<p>我们的板子是imx6ull，故复制到当前文件夹</p>
</blockquote>
<ol start="3">
<li>使用 mkimage.sh+参数 来制作镜像 参数指定启动方式，有：
<ul>
<li>ram</li>
<li>flash</li>
<li>sd<br />
参数我们使用sd。</li>
</ul>
</li>
</ol>
<pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">.&#x2F;mkimage sd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>运行后，生成了<code>sdk20-app.img</code>文件</p>
<h2 id="7-烧录到sd卡"><a class="markdownIt-Anchor" href="#7-烧录到sd卡"></a> 7. 烧录到SD卡</h2>
<p>由于我使用的是WSL环境，WSL访问USB比较不方便所以改在win下烧录。</p>
<p>此步所需软件：<br />
:::success</p>
<ul>
<li>Win32DiskImager<br />
:::</li>
</ul>
<p>此步非常简单，将生成的img文件传到win文件夹下，使用Win32DiskImager软件烧录到连接到win的SD卡。</p>
<h2 id="8-达成成就点灯大师"><a class="markdownIt-Anchor" href="#8-达成成就点灯大师"></a> 8. 达成成就【点灯大师】</h2>
<p>将SD卡插入imx6ull，设置启动方式为SD卡，具体设置需参考你板子的硬件原理图，比如我的：<br />
<img src="Snipaste_2025-06-30_00-49-08.png" alt="" /><br />
成功点亮！<br />
<img src="WIN_20250630_00_50_53_Pro.jpg" alt="" /></p>
<h2 id="9-参考资料"><a class="markdownIt-Anchor" href="#9-参考资料"></a> 9. 参考资料</h2>
<ul>
<li>《【正点原子】I.MX6U嵌入式Linux驱动开发指南V1.81》</li>
<li><a target="_blank" rel="noopener" href="https://doc.embedfire.com/linux/imx6/driver/zh/latest/index.html">[野火]嵌入式Linux驱动开发实战指南——基于i.MX6ULL系列 — [野火]嵌入式Linux驱动开发实战指南——基于i.MX6ULL系列 文档</a></li>
<li>《IMX6ULL参考手册》</li>
</ul>
<hr class="footnotes-sep" />
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Double Data Rate SDRAM 双倍数据速率同步动态随机存储器 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        <hr style="margin: 50px; background: #111111">

<div class="meta" style="text-align: end; font-size: small;">
<p>共计约2.4k字。于2025/06/30首次发布，最后更新于2025/10/27。 </p>

    <p>本文章为博主原创文章。遵循 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-sa/4.0/">CC 4.0 BY-SA</a> 版权协议，转载请附上原文出处链接和本声明。</p>





    
        <span>
            <a href="/Tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" id="tgs">
              #嵌入式 |
            </a>
        </span>
    
        <span>
            <a href="/Tags/Linux/" id="tgs">
              #Linux |
            </a>
        </span>
    


</div>

    </div>

    
<style>
    #bar{
        width: 10%;
        position: sticky;
        top: 30px;
        ol{
            width: 400px;
            list-style-type: circle;
            margin: 0;
        }
    }
    #back-to-top{
            opacity: 0;
        }
        #back-to-top.show{
            opacity: 1;
        }
</style>

<div id="bar">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B1%87%E7%BC%96led%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90"><span class="toc-text"> 1. 汇编LED原理分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="toc-text"> 2. 初始化流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-stm32%E7%9A%84%E5%A4%A7%E8%87%B4io%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B"><span class="toc-text"> 2.1. STM32的大致IO初始化流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-imx6ull-io%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text"> 2.2. I.MX6ULL IO初始化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0"><span class="toc-text"> 3. 汇编语言实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E9%93%BE%E6%8E%A5%E4%B8%8E%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 4. 链接与格式转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#41-%E9%93%BE%E6%8E%A5"><span class="toc-text"> 4.1. 链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2"><span class="toc-text"> 4.2. 格式转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8%E5%AE%98%E6%96%B9sdk%E5%8C%85%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6"><span class="toc-text"> 5. 使用官方SDK包生成镜像文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%AE%89%E8%A3%85sdk%E5%8C%85"><span class="toc-text"> 6. 安装SDK包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#61-%E5%8F%AF%E9%80%89%E6%A3%80%E6%9F%A5%E5%8F%AF%E7%94%A8%E6%80%A7"><span class="toc-text"> 6.1. （可选）检查可用性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#62-%E7%94%9F%E6%88%90%E9%95%9C%E5%83%8F%E6%96%87%E4%BB%B6"><span class="toc-text"> 6.2. 生成镜像文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E7%83%A7%E5%BD%95%E5%88%B0sd%E5%8D%A1"><span class="toc-text"> 7. 烧录到SD卡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E8%BE%BE%E6%88%90%E6%88%90%E5%B0%B1%E7%82%B9%E7%81%AF%E5%A4%A7%E5%B8%88"><span class="toc-text"> 8. 达成成就【点灯大师】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text"> 9. 参考资料</span></a></li></ol>
    <br>
    <div style="text-align: center;width: 200px;">
        <a href="/" style="text-decoration: none;">
            <button id="back-to-index" title="back to home">Home</button>
        </a>
        <button id="back-to-top" title="back to top">Top</button>
    </div>
</div>

<script>
    const backToTop = document.getElementById("back-to-top");

    window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
        backToTop.classList.add("show");
    } else {
        backToTop.classList.remove("show");
    }
    });

    backToTop.addEventListener("click", () => {
    window.scrollTo({
        top: 0,
        behavior: "smooth"
    });
    });
</script>

</div>


    <script src="/vendor/js/echarts.min.js"></script>
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const heatmapChartDom = document.getElementById('heatmapChart');
                if(heatmapChartDom){
                    const heatmapChart = echarts.init(heatmapChartDom, 'light');
                    const cellSize = 15;

                    const groupByYear = (data) => {
                        const result = {};
                        data.forEach(([date, value]) => {
                            const [year] = date.split('-').map(Number);
                            if (!result[year]) {
                                result[year] = [];
                            }
                            result[year].push([date, value]);
                        });
                        return result;
                    };

                    const groupedData = groupByYear([["2025-01-18",2],["2025-01-19",3],["2025-01-21",1],["2025-02-06",1],["2025-02-22",1],["2025-03-01",1],["2025-03-07",1],["2025-03-09",3],["2025-03-10",1],["2025-03-12",1],["2025-03-17",1],["2025-03-22",2],["2025-04-04",1],["2025-04-05",1],["2025-04-06",1],["2025-04-10",1],["2025-06-07",1],["2025-06-11",3],["2025-06-12",1],["2025-06-14",3],["2025-06-18",2],["2025-06-30",1],["2025-07-14",1],["2025-07-28",1],["2025-08-06",1],["2025-08-11",1],["2025-08-24",1],["2025-08-25",1],["2025-09-07",3],["2025-09-09",2],["2025-09-10",1],["2025-09-12",1],["2025-09-15",1],["2025-09-18",1],["2025-09-27",1],["2025-09-28",3],["2025-09-29",2],["2025-10-09",1],["2025-10-10",1],["2025-10-14",1],["2025-10-22",1],["2025-10-23",1],["2025-10-28",2],["2025-10-29",1],["2025-10-31",1],["2025-11-02",2],["2025-11-11",1],["2025-11-19",1],["2025-11-23",1],["2025-11-24",1],["2025-11-25",2],["2025-11-28",1],["2025-12-02",1]]);
                    const years = Object.keys(groupedData).reverse();

                    var initYear = parseInt(heatmapChartDom.getAttribute('year')) || new Date().getFullYear();
                    const minYear = years[years.length - 1];
                    const maxYear = years[0];
                    if (initYear < minYear || initYear > maxYear) {
                        initYear = maxYear;
                    }
                    console.log('[hexo-graph]generateHeatmapChart|initYear:', initYear, 'minYear:', minYear, 'maxYear:', maxYear);

                    heatmapChart.setOption({
                        grid: {},
                        tooltip: {
                            position: 'top',
                            formatter: params => `${params.value[0]}: ${params.value[1]} Articles`
                        },
                        calendar: {
                            top: '10%',
                            range: initYear,
                            cellSize: cellSize,
                            splitLine: { lineStyle: { color: '#101418', width: 4 } },
                            itemStyle: { borderWidth: 4, borderColor: '#101418', color: '#1e1e1e'},
                            dayLabel: { show: false },
                            monthLabel: { show: true ,color: '#7b7b7b'},
                            yearLabel: { show: false },


                        },

                        visualMap: {
                            show: true,
                            right: '8%',
                            bottom: '5%',
                            type: 'piecewise',
                            orient: 'horizontal',
                            text: ['More', 'Less'],
                            min: 0,
                            max: Math.max(...groupedData[initYear].map(item => item[1])),
                            inRange: { color: ["#663300","#994c00","#cc6600","#ff9933"] },

                        },
                        legend: {
                            type: 'scroll',
                            icon: 'none',
                            data: years,
                            orient: 'vertical',
                            top: '5%',
                            right: 'right',
                            itemWidth: 20,
                            itemHeight: 20,
                            itemGap: 10,
                            pageIconSize: 10,
                            pageTextStyle: { fontSize: 14,},
                            selectedMode: 'single',

                        },
                        series: years.map(year => ({
                            type: 'heatmap',
                            coordinateSystem: 'calendar',
                            data: groupedData[year],
                            name: year,
                            emphasis: {
                                disabled: true,
                            },
                            silent: year !== initYear,
                        })),
                    });

                    // init selected year
                    heatmapChart.dispatchAction({
                        type: 'legendSelect',
                        name: initYear,
                    });

                    heatmapChart.on('legendselectchanged', function(params) {
                        console.log('[hexo-graph]generateHeatmapChart|legendselectchanged:', params);
                        const selectedYear = Object.keys(params.selected).find(key => params.selected[key]);
                        if (selectedYear && groupedData[selectedYear]) {
                            heatmapChart.setOption({
                                calendar: {
                                    range: selectedYear,
                                },
                                visualMap: {
                                    max: Math.max(...groupedData[selectedYear].map(item => item[1])),
                                },
                                series: years.map(year => ({
                                    type: 'heatmap',
                                    coordinateSystem: 'calendar',
                                    data: groupedData[year],
                                    name: year,
                                    emphasis: {
                                        disabled: true,
                                    },
                                    silent: year !== selectedYear,
                                })),
                            });
                        }
                    });

                    heatmapChart.on('click', function (params) {
                        if (params.componentType === 'series') {
                            const [year, month] = params.value[0].split('-');
                            window.location.href = '/archives/' + year + '/' + month;
                        }
                    });
                }
            });
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const monthlyChartDom = document.getElementById('monthlyChart');
                if(monthlyChartDom){
                    const monthlyChart = echarts.init(monthlyChartDom, 'light');
                    monthlyChart.setOption({
                        xAxis: { 
                            type: 'category', 
                            data: ["2025-01","2025-02","2025-03","2025-04","2025-06","2025-07","2025-08","2025-09","2025-10","2025-11","2025-12"], 
                            axisLabel: { fontSize: 14, fontWeight: 'bold', fontFamily: 'Microsoft YaHei, SimSun, serif' }
                        },
                        yAxis: { type: 'value', splitLine: { lineStyle: { type: 'dashed', color: '#ccc' } } },
                        series: [{
                            name: 'Articles',
                            type: 'line',
                            data: [6,2,10,4,11,2,4,15,9,9,1],
                            smooth: true,
                            lineStyle: { color: '#FF9A8B', width: 2 },
                            itemStyle: { color: '#FF9A8B' },
                            areaStyle: { color: 'rgba(84, 112, 198, 0.4)' },
                            symbolSize: 10,
                            label: {
                                show: true,
                                position: 'top',
                                formatter: params => params.value,
                                fontSize: 14,
                                color: '#7b7b7b',
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif'
                            }
                        }]
                    });

                    monthlyChart.on('click', function (params) {
                        const [year, month] = params.name.split('-');
                        window.location.href = '/archives/' + year + '/' + month;
                    });
                }
            })
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const tagsChartDom = document.getElementById('tagsChart');
                if(tagsChartDom){
                    const tagsChart = echarts.init(tagsChartDom, 'light');
                    tagsChart.setOption({
                        tooltip: { trigger: 'item', formatter: '{b}: {c} ({d}%)' },
                        series: [{
                            type: 'pie',
                            radius: '60%',
                            data: [{"name":"Linux","value":30},{"name":"嵌入式","value":15},{"name":"python","value":7},{"name":"STM32","value":6},{"name":"CubeMX","value":5},{"name":"摄影基础","value":5},{"name":"学习笔记","value":5},{"name":"内核","value":4}],
                            label: {
                                position: 'outside',
                                formatter: '{b} {c} ({d}%)',
                                fontSize: 14,
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif',
                                color: '#7b7b7b',
                            },
                            color: ["#4E79A7","#F28E2B","#E15759","#76B7B2","#59A14F","#EDC949","#AF7AA1","#FF9DA7"],
                            labelLine: { show: true }
                        }],
                        legend: {
                            bottom: '0',
                            left: 'center',
                            data: [{"name":"Linux","value":30},{"name":"嵌入式","value":15},{"name":"python","value":7},{"name":"STM32","value":6},{"name":"CubeMX","value":5},{"name":"摄影基础","value":5},{"name":"学习笔记","value":5},{"name":"内核","value":4}].map(tag => tag.name),
                            textStyle: { fontSize: 14, fontWeight: 'bold', fontFamily: 'Microsoft YaHei, SimSun, serif',color: '#7b7b7b',}
                        }
                    });

                    tagsChart.on('click', function (params) {
                        window.location.href = '/tags/' + params.name;
                    });
                }
            })
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const categoriesChartDom = document.getElementById('categoriesChart');
                if(categoriesChartDom){
                    const categoriesChart = echarts.init(categoriesChartDom, 'light');
                    categoriesChart.setOption({
                        xAxis: { type: 'value', splitLine: { lineStyle: { type: 'dashed', color: '#7b7b7b' } } },
                        yAxis: {
                            type: 'category',
                            data: [{"name":"Linux","value":40},{"name":"嵌入式","value":12},{"name":"记录","value":10},{"name":"内核编程","value":9},{"name":"入门","value":7}].map(category => category.name).reverse(),
                            axisLabel: { fontSize: 14, fontWeight: 'bold', color: '#7b7b7b', fontFamily: 'Microsoft YaHei, SimSun, serif' }
                        },
                        series: [{
                            name: 'Category Count',
                            type: 'bar',
                            data: [{"name":"Linux","value":40},{"name":"嵌入式","value":12},{"name":"记录","value":10},{"name":"内核编程","value":9},{"name":"入门","value":7}].map(category => category.value).reverse(),
                            label: {
                                show: true,
                                position: 'right',
                                formatter: params => params.value,
                                fontSize: 14,
                                color: '#7b7b7b',
                                fontWeight: 'bold',
                                fontFamily: 'Microsoft YaHei, SimSun, serif'
                            },
                            itemStyle: {
                                color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
                                    { offset: 0, color: '#4C8C99' },
                                    { offset: 1, color: '#F9B5E2' }
                                ])
                            }
                        }]
                    });

                    categoriesChart.on('click', function (params) {
                        window.location.href = '/categories/' + params.name;
                    });
                }
            });
        </script>
    
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const categoriesTreeChartDom = document.getElementById('categoriesTreeChart');
                if(categoriesTreeChartDom){
                    const treeChart = echarts.init(categoriesTreeChartDom, 'light');
                    treeChart.setOption({
                        title: {
                            text: '操作提示：单击展开分类，双击进入具体分类页面',
                            textStyle: {
                                fontSize: 12,
                                color: '#999',
                                fontWeight: 'normal'
                            },
                            bottom: 0,
                            left: 'center'
                        },
                        tooltip: {
                            trigger: 'item',
                            triggerOn: 'mousemove'
                        },
                        series: [{
                            type: 'tree',
                            data: [{"name":"Categories","children":[{"name":"嵌入式","children":[{"name":"CubeMX配置功能","children":[],"count":5,"path":"嵌入式/CubeMX配置功能"},{"name":"程序架构","children":[],"count":5,"path":"嵌入式/程序架构"},{"name":"通信协议","children":[],"count":1,"path":"嵌入式/通信协议"}],"count":12,"path":"嵌入式"},{"name":"Linux","children":[{"name":"记录","children":[],"count":10,"path":"Linux/记录"},{"name":"内核编程","children":[],"count":9,"path":"Linux/内核编程"},{"name":"入门","children":[],"count":7,"path":"Linux/入门"},{"name":"项目管理","children":[],"count":1,"path":"Linux/项目管理"},{"name":"设备驱动程序","children":[],"count":5,"path":"Linux/设备驱动程序"},{"name":"WSL2","children":[],"count":2,"path":"Linux/WSL2"},{"name":"系统移植","children":[],"count":6,"path":"Linux/系统移植"}],"count":40,"path":"Linux"},{"name":"阅读","children":[],"count":1,"path":"阅读"},{"name":"python","children":[],"count":7,"path":"python"},{"name":"其他","children":[],"count":4,"path":"其他"},{"name":"摄影学习","children":[],"count":5,"path":"摄影学习"},{"name":"VPS","children":[],"count":1,"path":"VPS"}],"count":0,"path":""}],
                            initialTreeDepth: -1,
                            top: '5%',
                            bottom: '10%',
                            left: '0%',
                            right: '0%',
                            symbolSize: 15,
                            layout: 'orthogonal',
                            orient: 'TB',
                            itemStyle: {
                                color: '#60A5FA',
                                borderColor: '#60A5FA'
                            },
                            label: {
                                position: 'bottom',
                                verticalAlign: 'middle',
                                align: 'center',
                                fontSize: 14,
                                distance: 28,
                                color: '#cacaca',
                                formatter: function(params) {
                                    return params.data.name + (params.data.count ? ' (' + params.data.count + ')' : '');
                                }
                            },
                            leaves: {
                                label: {
                                    position: 'top',
                                    verticalAlign: 'middle',
                                    align: 'center'
                                }
                            },
                            emphasis: {
                                focus: 'descendant'
                            },
                            expandAndCollapse: true
                        }]
                    });

                    treeChart.on('dblclick', function (params) {
                        if (params.data && params.data.path) {
                            window.location.href = '/categories/' + params.data.path;
                        }
                    });
                }
            });
        </script>
    
    </body>

</html>

